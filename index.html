<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PETMON AI Test</title>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@latest/dist/ort.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <link rel="stylesheet" href="css/styles.css" />
    </head>
    <body>
        <div class="container">
            <h1>PETMON AI ÌÖåÏä§Ìä∏</h1>

            <!-- Î™®Îç∏ ÏóÖÎ°úÎìú ÏÑπÏÖò -->
            <section class="upload-section">
                <h2>1. Î™®Îç∏ ÌååÏùº ÏóÖÎ°úÎìú</h2>
                <div class="model-type-selector">
                    <label for="model-type">Î™®Îç∏ ÌÉÄÏûÖ ÏÑ†ÌÉù:</label>
                    <select id="model-type">
                        <option value="teachable">Teachable Machine (TensorFlow.js)</option>
                        <option value="onnx">PyTorch/ONNX</option>
                    </select>
                </div>
                <div class="file-inputs" id="teachable-inputs">
                    <div class="file-input-group">
                        <label for="metadata">metadata.json</label>
                        <input type="file" id="metadata" accept=".json" />
                        <span class="file-status" id="metadata-status">‚ùå</span>
                    </div>
                    <div class="file-input-group">
                        <label for="model">model.json</label>
                        <input type="file" id="model" accept=".json" />
                        <span class="file-status" id="model-status">‚ùå</span>
                    </div>
                    <div class="file-input-group">
                        <label for="weights">weights.bin</label>
                        <input type="file" id="weights" accept=".bin" />
                        <span class="file-status" id="weights-status">‚ùå</span>
                    </div>
                </div>
                <div class="file-inputs" id="onnx-inputs" style="display: none">
                    <div class="file-input-group">
                        <label for="classes">classes.txt</label>
                        <input type="file" id="classes" accept=".txt" />
                        <span class="file-status" id="classes-status">‚ùå</span>
                    </div>
                    <div class="file-input-group">
                        <label for="onnx-model">model.onnx</label>
                        <input type="file" id="onnx-model" accept=".onnx" />
                        <span class="file-status" id="onnx-status">‚ùå</span>
                    </div>
                    <div class="file-input-group">
                        <label for="onnx-data">model.onnx.data (ÏÑ†ÌÉù)</label>
                        <input type="file" id="onnx-data" accept=".data" />
                        <span class="file-status" id="onnx-data-status">‚ö™</span>
                    </div>
                    <div class="file-input-group">
                        <label for="onnx-input-size">ÏûÖÎ†• ÌÅ¨Í∏∞</label>
                        <select id="onnx-input-size">
                            <option value="224">224x224</option>
                            <option value="320">320x320</option>
                            <option value="416">416x416</option>
                            <option value="512">512x512</option>
                            <option value="640" selected>640x640</option>
                            <option value="1280">1280x1280</option>
                        </select>
                    </div>
                </div>
                <button id="load-model-btn" disabled>Î™®Îç∏ Î°úÎìú</button>
                <p id="model-status-msg"></p>
            </section>

            <!-- ÏõπÏ∫† ÏÑπÏÖò -->
            <section class="webcam-section">
                <h2>2. ÏõπÏ∫† ÌÖåÏä§Ìä∏</h2>
                <div class="resolution-selector">
                    <div class="selector-group">
                        <label for="aspect-ratio">ÌôîÎ©¥ ÎπÑÏú®:</label>
                        <select id="aspect-ratio">
                            <option value="1:1" selected>1:1 (Ï†ïÏÇ¨Í∞ÅÌòï)</option>
                            <option value="4:3">4:3 (ÌëúÏ§Ä)</option>
                            <option value="16:9">16:9 (ÏôÄÏù¥Îìú)</option>
                        </select>
                    </div>
                    <div class="selector-group">
                        <label for="resolution">Ìï¥ÏÉÅÎèÑ:</label>
                        <select id="resolution">
                            <option value="416x416">416x416</option>
                            <option value="480p">480p (480x480)</option>
                            <option value="640x640">640x640</option>
                            <option value="720p" selected>720p (720x720)</option>
                            <option value="800x800">800x800</option>
                            <option value="1080p">1080p (1080x1080)</option>
                            <option value="1440p">1440p (1440x1440)</option>
                            <option value="2160p">2160p (2160x2160)</option>
                        </select>
                    </div>
                </div>
                <div class="webcam-container">
                    <video id="webcam" autoplay playsinline></video>
                    <canvas id="capture-canvas" style="display: none"></canvas>
                </div>
                <div id="class-labels" class="class-labels"></div>
                <div class="webcam-controls">
                    <button id="start-webcam-btn" disabled>ÏõπÏ∫† ÏãúÏûë</button>
                    <button id="start-test-btn" disabled>üîç ÌåêÎèÖ ÏãúÏûë (0/10)</button>
                </div>
            </section>

            <!-- Ï∫°Ï≤òÎêú Ïù¥ÎØ∏ÏßÄÎì§ -->
            <section class="captures-section">
                <h2>3. Ï∫°Ï≤òÎêú Ïù¥ÎØ∏ÏßÄ</h2>
                <div id="captures-grid" class="captures-grid"></div>
            </section>

            <!-- Í≤∞Í≥º ÏÑπÏÖò -->
            <section class="results-section" id="results-section" style="display: none">
                <h2>4. Î∂ÑÏÑù Í≤∞Í≥º</h2>

                <!-- Í∞úÎ≥Ñ Í≤∞Í≥º ÌèâÍ∞Ä -->
                <div id="evaluation-container" class="evaluation-container"></div>

                <!-- Ï†ïÌôïÎèÑ Í∑∏ÎûòÌîÑ -->
                <div class="chart-container">
                    <canvas id="accuracy-chart"></canvas>
                </div>

                <!-- Í≤∞Í≥º ÌÖåÏù¥Î∏î -->
                <div class="table-container">
                    <table id="results-table">
                        <thead>
                            <tr>
                                <th>Ïù¥ÎØ∏ÏßÄ</th>
                                <th>ÏòàÏ∏° Í≤∞Í≥º</th>
                                <th>Ïã†Î¢∞ÎèÑ</th>
                                <th>ÌèâÍ∞Ä</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>

                <!-- ÏµúÏ¢Ö Ï†ïÌôïÎèÑ -->
                <div class="final-accuracy">
                    <h3>ÏµúÏ¢Ö Ï†ïÌôïÎèÑ: <span id="final-accuracy-value">-</span></h3>
                    <p>ÌèâÍ∞ÄÎêú Ïù¥ÎØ∏ÏßÄ: <span id="evaluated-count">0</span>/10</p>
                </div>
            </section>
        </div>

        <script src="src/index.js"></script>
        <script></script>
    </body>
</html>
